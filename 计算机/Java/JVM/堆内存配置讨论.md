接收了2个外包的项目回来 ，发现tomcat的配置是 JAVA_OPTS="-server -Xms10g -Xmx10g -Xmn8g，一起来就要8g内存

之前在一个小互联网公司  java项目一般都是配置 -Xms512g -Xmx1.5g 

- -Xms -Xmx这两个配置 大家一般设置多少，项目的业务量是多少? 

  我这边项目一般配置1到2GB，比较简单的就给512MB了……业务量倒是不大，日均万级别。

  启动后看看，没有什么业务量的情况下用了多少内存，再在这个基础上适当加一些。

  10G内存，分8GB给年轻代，在G1之前的垃圾收集器，是可以这么用的。

- 年轻代配太大会出现什么问题？老年代变小，容易fullgc吗？

  减少 younggc，如果没有特别大的对象的话，能减少 gc 次数

- 那一次gc时间是不是也会变长

  不一定，看你的业务特征。 GC耗时只跟存活对象数量有关，跟堆内存大小无关。

  gc 过程中，比较耗时的几个操作，就是标记，还有**移动**了。

- ygc是年轻代满了才会触发吧

  是呀

- 那满了不就代表存活的对象多了？

- 增大年轻代的好处: 假设原来年轻代为2GB，那么使用分代GC时，理论上一个对象在年轻代的最大存活周期是15次gc，可以推论得知，只要1个对象的存活时间，超过 分配30GB（=15\*2GB）内存的时间，就会进入老年代。如果年轻代增加到8GB，那么理论上，需要分配 8GB\*15 = 120GB， 分配这么多内存的对象之后，一个对象才进入老年代。 如果对象存活时间满足类似的业务特征，那么加大Xmn就可以缓解老年代的压力。 对于 并行GC，CMS等垃圾收集器来说，能够减少FullGC的次数, 这种代价非常划算。

