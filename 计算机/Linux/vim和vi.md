# vim和vi
vim 是vi的升级版本，它不仅兼容vi的所有指令，而且还有一些新的特性在里面。vim的这些优势主要体现在以下几个方面：
1. 多级撤消

  我们知道在vi里，按 u只能撤消上次命令，而在vim里可以无限制的撤消。

2. 易用性

  vi只能运行于unix中，而vim不仅可以运行于unix,windows ,mac等多操作平台。

3. 语法加亮

  vim可以用不同的颜色来加亮你的代码。

4. 可视化操作

  就是说vim不仅可以在终端运行，也可以运行于x window、 mac os、 windows。

5. 对vi的完全兼容

  某些情况下，你可以把vim当成vi来使用。

# 三种状态
- 命令模式（command mode）：控制屏幕光标的移动，字符、字或行的删除，移动复制某区段及进入Insert mode下，或者到 last line mode。 
- 插入模式（Insert mode）：只有在Insert mode下，才可以做文字输入，按「ESC」键可回到命令行模式。
- 底行模式（last line mode）：将文件保存或退出vi，也可以设置编辑环境，如寻找字符串、列出行号……等。

# 基本操作

## 打开文件

- vim 文件名 打开单个文件
- vim 文件1 文件2 ... 打开多个文件

进入vi之后，是处于「命令行模式（command mode）」，您要切换到「插入模式（Insert mode）」才能够输入文字。初次使用vi的人都会想先用上下左右键移动光标，结果电脑一直哔哔叫，把自己气个半死，所以进入vi后，先不要乱动，转换到「插入模式（Insert mode）」再说吧

## 进入插入模式（Insert mode）

在「命令行模式（command mode）」下按一下字母「i」就可以进入「插入模式（Insert mode）」，这时候你就可以开始输入文字了。

## 退出插入模式

您目前处于「插入模式（Insert mode）」，您就只能一直输入文字，如果您发现输错了字！想用光标键往回移动，将该字删除，就要先按一下「ESC」键转到「命令行模式（command mode）」再删除文字。

## 退出vim

在「命令行模式（command mode）」下，按一下「：」冒号键进入「Last line mode」，例如：

- :w filename （输入 「w filename」将文章以指定的文件名filename保存）
- :wq (输入「wq」，存盘并退出vi)
- :q! (输入q!， 不存盘强制退出vi)

# 命令行模式（command mode）功能键
在Vim中，很多命令都可以配合数字使用，比如删除10个字符10x，在当前位置后插入3个！，`3a！Esc`，这里的Esc是必须的，否则命令不生效。

## 进入插入模式

「i」切换进入插入模式「insert mode」，按“i”进入插入模式后是从光标当前位置开始输入文件
「I」进入插入模式后，行首插入
「A」进入插入模式后，行尾插入
「a」进入插入模式后，是从目前光标所在位置的下一个位置开始输入文字；
「o」进入插入模式后，是插入新的一行，光标下新建空行，从行首开始输入文字。
「O」进入插入模式后，光标上新建空行

## 移动光标

vi可以直接用键盘上的光标来上下左右移动，但正规的vi是用小写英文字母==h、j、k、l==，分别控制光标左、下、上、右移一格。以上四个命令可以配合数字使用，比如20j就是向下移动20行，5h就是向左移动5个字符。
「ctrl」+「b」：屏幕往“后”移动一页。
「ctrl」+「f」：屏幕往“前”移动一页。
「ctrl」+「u」：屏幕往“后”移动半页。
「ctrl」+「d」：屏幕往“前”移动半页。 
「ctrl」+「e」: 向下滚动一行
「ctrl」+「y」:向上滚动一行
「gg」：移动到文章的开头。
「G」：移动到文章的最后。
「$」：移到当前行的最后一个字符
「^」：移到当前行的第一个非空字符
「w」：光标跳到下个单词的开头，可与数字组合
「W」：移到下一个单词的开头，忽略标点符号，可与数字组合
「e」：光标跳到下个单词的词尾，，可与数字组合
「E」： 移到下一个单词的结尾，忽略标点符号，可与数字组合
「b」：光标回到上个单词的开头，可与数字组合
「B」： 移到前一个单词的开头，忽略标点符号，可与数字组合
「#l」：光标从当前位置向后移动#个位置，如：5l,56l。
「n|」： 移到当前行的第n列
「0或|或home」：移到当前行的第一列
「L」：移到屏幕的最后一行
「M」：移到屏幕的中间一行
「H」：移到屏幕的第一行
「(」：移到句子的开头
「)」： 移到句子的结尾
「{」：移到段落的开头
「}」：移到下一个段落的开头
「+」： 移到下一行的第一个字符
「-」：移到前一行的第一个非空字符
「f」：fx将找到光标后第一个为x的字符，如 3fd 将找到第三个为d的字符。
「F」：同f，反向查找。

## 删除

「cw」： 删除当前位置到该位置单词的末尾，外加插入文本; cw删除的是英文单词，中文不行的。

「c$ or C」： 删除当前位置到行末，外加插入文本

「cc 」：删除一行，外加可以插入文本

「x」：每按一次，删除光标所在位置的一个字符。

「#x」：例如，「6x」表示删除从光标所在位置开始的后面6个字符，包含光标所在字符。

「X」：大写的X，每按一次，删除光标所在位置前面一个字符。

「#X」：例如，「20X」表示删除光标所在位置前面20个字符，不含光标所在字符。

「dl」：删除当前字符， dl=x

「dh」：删除前一个字符，dh=X

「dj」：删除当前行及下一行

「dk」：删除当前行及上一行

「dw」：只删除当前位置到这个单词末。

「#dw」：从当前光标处往后删除#个单词
「db」：删除光标前面的单词
「#db」： 从当前行开始往前删除#单词
「dd」：删除光标所在行。
「#dd」：从光标所在行开始删除#行
「D或d$」：从光标处删除到行尾
「dG」：(先输入d，然后按 shift 键输入 g)删除当前行至最后一行的所以行
「kdgg」：删除当前行之前所有行（不包括当前行）
「jdG」：删除当前行之后所有行（不包括当前行）
「J」：删除两行之间的空行，实际上是合并两行
「ctrl+h或backspace」：在insert mode下，删除前面的字符
「ctrl+w」：在insert mode下，删除前面的单词

## 复制粘贴

注意：所有与“y”有关的复制命令都必须与“p”配合才能完成复制与粘贴功能；你所删除的文本会留在缓存中，当你输入 p 后会把这些删除的文本粘贴到当前光标后面，完成剪切与粘贴功能。
「yw」：复制光标所在之处到单词尾的字符，含光标所在字符
「#yw」：复制光标后#个单词到缓冲区，第一个单词取法同yw
「yb」：复制光标所在之处到单词首的字符，不含光标所在字符
「#yb」：复制光标前#个单词到缓冲区，第一个单词取法同yb
「yy」：复制光标所在行到缓冲区，复制整行。
「#yy」：例如，「6yy」表示拷贝从光标所在的该行“往下数”6行文字。
「y$」：从光标所在位置复制到行末。
「p」：将缓冲区内的字符贴到光标所在位置后，配合yy使用则在当前行的下一行粘贴，配合yw或yb使用则在光标所在位置后粘贴
「P」：将缓冲区内的字符贴到光标所在位置前，配合yy使用则在当前行的上一行粘贴，配合yw或yb使用则在光标所在位置前粘贴
「ddp」：交换光标所在行和其下紧邻的一行
「xp」：交换当前字符和其后一个字符
复制大段代码：把光标移到你需要复制的代码行首；按 V 选择整行，可移动光标选择多行；按 d 剪切或按y 复制选择的代码；移动光标到你需要粘贴的位置，按 p 粘贴代码到光标后的位置，或按 P 粘贴到光标前。

## 替换 

「r」：替换光标所在处的字符。
「R」：替换光标所到之处的字符，直到按下「ESC」键为止。
「s/old/new/」： 用old替换new，替换当前行的第一个匹配
「s/old/new/g」： 用old替换new，替换当前行的所有匹配
「%s/old/new/」： 用old替换new，替换所有行的第一个匹配
「%s/old/new/g」： 用old替换new，替换整个文件的所有匹配

## 撤销重做

「u」：如果您误执行一个命令，可以马上按下「u」，回到上一个操作。按多次“u”可以执行多次回复。
「U」：撤销对整行的操作
「ctrl+r」：重做

## 跳至指定的行

「ctrl」+「g」列出光标所在行的行号。
「#G」：#代表数字，例如，「15G」，表示移动光标至文章的第15行行首。

## 代码注释

注释：按 Ctrl+v 切换到可视化模式；移动光标(j或k)选中需要注释的行的开头；按大写I，然后输入注释符，如#；最后按 Esc。
取消注释：按 Ctrl+v 切换到可视化模式；移动光标(j或k)选择要删除的注释符；按d或x删除注释符。如果使用 //符号注释，则取消注释时需进行两遍操作。

## 查找

「/关键字」：先按「/」键，再输入要查找的字符，**敲回车，敲完回车后 `n` 下一个，`N` 前一个**
「?关键字」：先按「?」键，再输入您想寻找的字符，如果第一次找的关键字不是您想要的，可以一直按「n」会往前寻找到您要的关键字为止。
查找很长的词：如果一个词很长，键入麻烦，可以将光标移动到该词上，按*或#键即可以该单词进行搜索，相当于/搜索。而#命令相当于?搜索

11. 保存并退出
「ZZ」：保存+退出（在command mode下而不是last line mode）; 

# Last line mode下命令简介
在使用「last line mode」之前，请记住先按「ESC」键确定您已经处于「command mode」下后，再按「：」冒号即可进入「last line mode」。

1. 常用设置
「set all」： 显示所有选项。
「set nu[mber]」： 显示行数，会在文件中的每一行前面列出行号。
「set binary」： 可读二进制文件
「syntax on」：语法高亮
「set taglength=4」：设置tag长度
「set ignorecase」：忽略大小写的查找
「set noignorecase」：不忽略大小写的查找
「set hlsearch」：高亮搜索结果，所有结果都高亮显示，而不是只显示一个匹配。
「set nohlsearch」：关闭高亮搜索显示
「nohlsearch或noh」：关闭当前的高亮显示，如果再次搜索或者按下n或N键，则会再次高亮
「set incsearch」：逐步搜索模式，对当前键入的字符进行搜索而不必等待键入完成
「set wrapscan」：重新搜索，在搜索到文件头或尾时，返回继续搜索，默认开启
记不住可使用tab键补齐命令(也可以显示可以选择的命令)


2. 跳到文件中的某一行
「#」：「#」号表示一个数字，在冒号后输入一个数字，再按回车键就会跳到该行了，如输入数字15，再回车，就会跳到文章的第15行。

3. 删除
「n,md」：删除n到m行，包含n行，若m为$则表示删除n行到最后一行 

4. 复制粘贴
「n,m co l」：将n到m行的内容复制到l行之后，m和l可为$表示最后一行
「#,#2 m #3」：将#到#2行的内容移动到#3行之后，#2和#3可为$表示最后一行

5. 替换
「n,m s/old/new/g」：用old替换new，替换第n行到第m行的所有匹配，当m为$表示从从第n行到最后一行

6. 保存文件
「w」：在冒号输入字母「w」就可以将文件保存起来。
「w [filename]」： 储存正在编辑的文件为filename
「wq [filename]」：储存正在编辑的文件为filename，并退出vi

7. 离开vi
「e!」： 撤消当前所有编辑，返回原始状态的话
「e [filename]」：打开另外一个文件(打开新文件前，请先保存文件，因为该操作不会保存之前的修改）
「q! 」：放弃所有修改，退出vi
「q」：按「q」就是退出，如果无法离开vi，可以在「q」后跟一个「!」强制离开vi。
「wq」：一般建议离开时，搭配「w」一起使用，这样在退出的时候还可以保存文件。

8. 读取
「read filename」：读取另一个文件的内容复制到当前文件中
「read !命令」：把某个命令的结果复制到当前文件中
「r file 」：读入文件file内容，并插在当前行后
「nr file」： 读入文件file内容，并插在第n行后

9. 打开文件及切换文件
「open file」： 在vim窗口当前中打开一个新文件，窗口中之前打开的文件会被关闭，如果上一个打开的文件中做了修改但是还未保存，将出现错误提示并且无法打开新文件。如果file缺省将任然打开当前窗口文件。
「split file」： 在横向分割的新窗口中打开文件，如果file缺省将新窗口中会打开当前窗口文件。
「vsplit file」： 在纵向分割的新窗口中打开文件，如果file缺省将新窗口中会打开当前窗口文件。
「new file」：
「vnew file」：
「e」： 远程文件地址 打开远程文件，比如ftp或者share folder
「args」： 查看当前打开的文件列表，当前正在编辑的文件会用[]括起来。
「bn」： 切换到下一个文件
「bp」：切换到上一个文件



