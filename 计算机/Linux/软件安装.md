# 安装方式
1. rpm包 rpm指令 -ivh等参数，GonRPM，kpackage 图形化RPM工具
2. dpkg包 dpkg指令
3. tar.gz包 tar指令 -xvzf等参数 ；make指令；Kinstall；Kife
4. tar.bz2包 tar指令 -xjvf等参数；make指令
5. apt指令
6. yum指令
7. dnf指令
8. bin文件 chmod指令
9. 源码式，可执行文件式

参考 http://zyjustin9.iteye.com/blog/2026579

# Fedora安装Chrome浏览器
```shell
cd /etc/yum.repos.d/
sudo wget  http://repo.fdzh.org/chrome/google-chrome-mirrors.repo
```
然后就可以从Software应用中搜索到Chrome,点击install即可

# rpm
<http://liaoph.com/linux-rpm/>

## 软件包的演变史

最早期时，软件包是一些**可以运行的程序组成的集合，可能还要加上若干配置文件和动态库**。例如，程序员将针对某个平台编译好的二进制文件、程序所依赖的动态库文件（如 .so 和 .dll 为扩展名的文件）以及配置文件复制到一个目录中，这个目录就可以称为一个软件包。

为了保证使用的软件包能够方便且快速地复制到别的机器上， 人们开始选用压缩文件的方式来封装软件包。 比如通过 tar 或者 gzip 压缩后得到 .tar.gz、 .rar 或者 .zip 格式的文件， 这时我们就获得了一个较为高级的软件包。

再往后发展， 就出现了更高级的软件包， 比如 `.rpm`、 `.bin` 或者 `.deb` 格式的软件包。 这些格式的软件包， 相对于压缩格式的软件包又有了更进一步的发展， **它们不仅支持文件压缩功能， 还有依赖维护、 脚本的嵌入等功能**。RedHat 公司开发贡献的 RedHat Package Manager（RPM） 可以说是这些高级别软件包中最典型的一个。

## RPM 软件包的功能
RPM 软件包的功能如下：
- 存储和数据压缩
- 文件安装
- 配置文件生成
- 系统服务注册
- 软件依赖检查和依赖输出

### 存储数据压缩

RPM具有软件包的基本功能——数据压缩存储，RPM 安装列表中的文件在按照某个指定的算法（如 gzip）压缩后，作为最终 RPM 文件的一个数据块，与其他控制信息存储进同一个文件中。最终所有的数据都存储在同一个 RPM 文件中。

### 文件安装
文件安装是软件包的一个基本功能，它将压缩的文件解压至目标操作系统上。安装过程中，还可能动态生成一些文件，并安装到系统中。

### 配置文件生成
配置文件既可能是预先写好的静态文件，也可能是根据安装环境动态生成的文件。

### 系统服务注册
使用 rpm 安装一些软件包，比如 apache，mysql-server 等，在安装完成后，目录 /etc/init.d/下会生成一个服务启动脚本文件，而且此服务还可能被加入到系统的自动启动服务中。

### 软件依赖检查
大多数程序都会依赖其他组件，比如数据库操作程序可能需要 `libmysql` 的支持。为了保证每个软件在安装后都能正常运行，在安装过程中，软件安装程序需要对该软件包所依赖的所有元素进行检查。

### 其他功能
RPM 还有一个重要功能就是对嵌入脚本的支持：它支持在安装软件或者卸载软件的过程中，执行用户预定义的指令。常用的脚本执行点如下：
- pre install
- post install
- pre uninstall
- post uninstall

`pre/post install` 表示在安装之前或之后；`pre/post uninstall` 表示在卸载之前或者之后。

除此之外，RPM 包还可以支持对源包进行数字签名，在安装时可以使用公钥验证 RPM 包的合法性等等。

## RPM 包的命名方式
以 `httpd-2.2.15-39.el6.centos.x86_64.rpm` 为例，这里 `httpd` 表示**软件名**，`2.2.15` 表示**主版本号，次版本号，发行版本号**分别是2，2，15，`39.el6.centos` 表示 RPM 包的**修订号和 OS 信息**，`x86_64` 表示此软件包**适用的平台，常见的有i386，i586，x86_64** 等等。

## RPM 包管理命令的使用
### 安装
使用 `-i` 选项安装软件包
```bash
rpm {-i|--install} [install-options] PACKAGE_FILE1..
```

执行样例
```
[root@localhost ~]# rpm -ivh httpd-2.2.15-39.el6.centos.x86_64.rpm
Preparing...########################################### [100%]
   1:httpd  ########################################### [100%]
```
常用选项

| 选项 | 说明 |
|---|---|
| -h | 显示安装进度 |
| -v | 显示详细信息 |
| --test | 测试安装是否能够成功，而不实际安装 |
| --nodeps | 忽略依赖强制安装，可能会因为依赖缺失而无法正常工作 |
| --replacepkgs | 重新安装并覆盖原有的文件 |
| --force | 强制覆盖安装，它等同于--replacepkgs, --replacefiles, 和 --oldpackage |

### 升级
如果**不知道一个软件包是否已经安装**，并希望如果**已经安装那么升级此软件包**，使用 `-U` 选项。
```bash
rpm {-U|--upgrade} [install-options] PACKAGE_FILE ...
```
如果仅**仅希望升级软件包**，使用 `-F` 选项
```bash
rpm {-F|--freshen} [install-options] PACKAGE_FILE ...
```
升级软件包和安装软件包**一样可以使用 `--test`，`--nodeps`，`--force` 等选项**。

示例：安装并升级 zsh 软件包
```
[root@localhost rpm]# rpm -ivh zsh-4.3.10-7.el6.x86_64.rpm
Preparing...########################################### [100%]
   1:zsh    ########################################### [100%]
[root@localhost rpm]# rpm -Uvh zsh-4.3.10-9.el6.x86_64.rpm
Preparing...########################################### [100%]
   1:zsh    ########################################### [100%]
```
如果想要将软件包**降级到旧版本**，使用 **--oldpackage** 选项
```
[root@localhost rpm]# rpm -Uvh --oldpackage zsh-4.3.10-7.el6.x86_64.rpm
Preparing...########################################### [100%]
   1:zsh    ########################################### [100%]
```
在升级软件包时，原来软件包的配置文件可能已经被修改，升级时，新版本的文件不会将老版本的配置文件覆盖，而是将新版本的配置文件加上 .rpmnew 后缀后保存。

注意：内核也是软件包，但是不要直接对内核进行升级（如果新的内核有兼容问题启动不了而旧内核又被覆盖就悲剧了），因为 Linux 允许多内核共存，所以可以直接安装多个不同版本内核。

### 卸载
使用 `-e` 选项即可简单卸载一个软件包。
```bash
rpm {-e|--erase} [--allmatches] [--nodeps] [--test] PACKAGE_NAME ...
```
如果卸载正常，不会输出任何信息。

| 选项 | 说明 |
|---|---|
| --allmatches | 一个程序包同时安装多个版本，则次选项一次全部卸载 |

注意：如果程序包的配置文件安装后曾被修改，卸载时，此文件通常不会被删除，而是被重命名为 .rpmsave 后缀后留存。

### 查询
使用 `-q` 选项，可以**检查安装的所有包**，还可以**查看某包的详细信息**。
```bash
rpm {-q|--query} [select-options] [query-options] PACKAGE_NAME...
```
查询某包是否已经安装
```bash
rpm -q PACKAGE_NAME...
```
示例：
```bash
[root@localhost rpm]rpm -q zsh
zsh-4.3.10-9.el6.x86_64
```
#### 常用查询选项

| 选项 | 说明 | 命令格式 |
|---|---|---|
| -a | 查询安装的所有包，包名支持通配符 | rpm -qa PACKAGE_NAME |
| -p | 查询未安装包的信息 | rpm -qp PACKAGE_FILE |
| -i | 查询某包的简要说明信息 |   |
| -l | 查询软件包安装位置，需要完整包名 | |

#### 常用举例

1. 查询未安装包的信息

   指定的是RPM包的文件名而不是某个包的软件名。

   ```shell
   rpm -qi PACKAGE_NAME
   ```

   如：
   ```
   [root@localhost rpm]# rpm -qi zsh
   Name        : zsh                          Relocations: (not relocatable)
   Version     : 4.3.10                            Vendor: CentOS
   Release     : 9.el6                         Build Date: Wed 05 Nov 2014 07:20:52 PM CST
   Install Date: Sat 11 Apr 2015 11:37:12 PM CST      Build Host: c6b8.bsys.dev.centos.org
   Group       : System Environment/Shells     Source RPM: zsh-4.3.10-9.el6.src.rpm
   Size        : 5009102                          License: BSD
   Signature   : RSA/SHA1, Wed 05 Nov 2014 08:05:42 PM CST, Key ID 0946fca2c105b9de
   Packager    : CentOS BuildSystem <http://bugs.centos.org>
   URL         : http://zsh.sunsite.dk/
   Summary     : A powerful interactive shell
   Description :
   The zsh shell is a command interpreter usable as an interactive login
   shell and as a shell script command processor.  Zsh resembles the ksh
   shell (the Korn shell), but includes many enhancements.  Zsh supports
   command line editing, built-in spelling correction, programmable
   command completion, shell functions (with autoloading), a history
   mechanism, and more.
   ```
   这里显式了 zsh 这个包的各类元信息，如名字，版本，发行商，打包作者，描述信息等。

2. 查询软件包安装的文件列表

   ```shell
   rpm -ql PACKAGE_NAME
   ```
   示例：
   ```
   [root@localhost rpm]# rpm -ql zsh
   /bin/zsh
   /etc/skel/.zshrc
   /etc/zlogin
   /etc/zlogout
   /etc/zprofile
   /etc/zshenv
   /etc/zshrc
   /usr/lib64/zsh
   /usr/lib64/zsh/4.3.10
   ...
   /usr/share/zsh/4.3.10/functions/zstyle+
   /usr/share/zsh/4.3.10/scripts
   /usr/share/zsh/4.3.10/scripts/newuser
   /usr/share/zsh/site-functions
   ```

3. 查看软件包安装后生成的所有配置文件

   ```bash
   rpm -qc PACKAGE_NAME
   ```
4. 查看软件包安装后生成的所有说明文件和帮助文件

   ```bash
   rpm -qd PACKAGE_NAME
   ```
5. 查看软件包制作时随版本变化的 changelog 信息

   ```bash
   rpm -q --changelog PACKAGE_NAME
   ```

6. 查看软件包提供的 capabilities （即输出给其他软件包的依赖）

   ```bash
   rpm -q --provides PACKAGE_NAME
   ```

7. 查看软件包所需的依赖

   ```bash
   rpm -q --requires PACKAGE_NAME
   ```

8. 查看软件包安装或卸载时执行的脚本

   ```shell
   rpm -q --scripts PACKAGE_NAME
   ```

   如：
   ```
   [root@localhost rpm]# rpm -q --scripts zsh
   postinstall scriptlet (using /bin/sh):
   if [ ! -f /etc/shells ] ; then
   echo "/bin/zsh" > /etc/shells
   else
   fi

   if [ -f /usr/share/info/zsh.info.gz ]; then
   # This is needed so that --excludedocs works.
   /sbin/install-info /usr/share/info/zsh.info.gz /usr/share/info/dir \
   --entry="* zsh: (zsh).            An enhanced bourne shell."
   fi

   :
   preuninstall scriptlet (using /bin/sh):
   if [ "$1" = 0 ] ; then
   if [ -f /usr/share/info/zsh.info.gz ]; then
   # This is needed so that --excludedocs works.
   /sbin/install-info --delete /usr/share/info/zsh.info.gz /usr/share/ info/dir \
   --entry="* zsh: (zsh).            An enhanced bourne shell."
   fi
   fi
   :
   postuninstall scriptlet (using /bin/sh):
   if [ "$1" = 0 ] ; then
   if [ -f /etc/shells ] ; then
   TmpFile=`/bin/mktemp /tmp/.zshrpmXXXXXX`
   grep -v '^/bin/zsh$' /etc/shells > $TmpFile
   cp -f $TmpFile /etc/shells
   rm -f $TmpFile
   fi
   fi
   ```
    这里包含了安装后，卸载前/后脚本。

### 检验
还可以查询软件包安装之后的文件是否发生了改变
```bash
rpm {-V|--verify} [select-options] [verify-options]

```
如：
```
[root@localhost rpm]# rpm -V httpd
S.5....T.  c /etc/httpd/conf/httpd.conf
```
检验时使用了多个位表示文件的多个属性是否发生了变化：

| 标志 | 说明 |
|---|---|
| S | 文件大小 |
| M | 文件权限 |
| 5 | 文件摘要信息（通常是 MD5 码） |
| D | 设备文件的主/次设备号 |
| L | 软链接变化 |
| U | 属主 |
| G | 属组 |
| T | 文件的 mtime |
| P | caPabilities |

程序包的合法性验证

在软件包制作时，为了防止软件包被人修改植入后门，制作者可以使用自己私钥对软件包进行数字签名，安装者就可以使用公钥验证软件包的合法性。同时还可以使用摘要算法提取软件包的摘要信息用于验证软件包的完整性。

通常，RHEL 系的安装光盘中包含有用于验证其软件包合法性的公钥文件。

导入公钥
```bash
rpm --import /path/to/RPM-GPG-KEY-FILE
```

验证合法性
```bash
rpm {-K|--checksig} PACKAGE_FILE
```

## RPM 管理器的数据库

每次安装 rpm 包时，rpm 系统会将一些元信息存储在它的数据库中，使用 `rpm -q` 命令查询软件包的相关信息时将会查询这些数据库，数据库文件位于 `/var/lib/rpm` 目录中。如果 RPM 的数据库损坏，将会导致一些 RPM 数据丢失，一些功能将无法正常使用。
```
[root@bogon ~]# file /var/lib/rpm/*
/var/lib/rpm/Basenames:      Berkeley DB (Hash, version 9, native byte-order)
/var/lib/rpm/Conflictname:   Berkeley DB (Hash, version 9, native byte-order)
/var/lib/rpm/__db.001:       Applesoft BASIC program data
/var/lib/rpm/__db.002:       386 pure executable
/var/lib/rpm/__db.003:       386 pure executable not stripped
/var/lib/rpm/__db.004:       386 pure executable
/var/lib/rpm/Dirnames:       Berkeley DB (Btree, version 9, native byte-order)
/var/lib/rpm/Filedigests:    Berkeley DB (Hash, version 9, native byte-order)
/var/lib/rpm/Group:          Berkeley DB (Hash, version 9, native byte-order)
/var/lib/rpm/Installtid:     Berkeley DB (Btree, version 9, native byte-order)
/var/lib/rpm/Name:           Berkeley DB (Hash, version 9, native byte-order)
/var/lib/rpm/Obsoletename:   Berkeley DB (Hash, version 9, native byte-order)
/var/lib/rpm/Packages:       Berkeley DB (Hash, version 9, native byte-order)
/var/lib/rpm/Providename:    Berkeley DB (Hash, version 9, native byte-order)
/var/lib/rpm/Provideversion: Berkeley DB (Btree, version 9, native byte-order)
/var/lib/rpm/Pubkeys:        Berkeley DB (Hash, version 9, native byte-order)
/var/lib/rpm/Requirename:    Berkeley DB (Hash, version 9, native byte-order)
/var/lib/rpm/Requireversion: Berkeley DB (Btree, version 9, native byte-order)
/var/lib/rpm/Sha1header:     Berkeley DB (Hash, version 9, native byte-order)
/var/lib/rpm/Sigmd5:         Berkeley DB (Hash, version 9, native byte-order)
/var/lib/rpm/Triggername:    Berkeley DB (Hash, version 9, native byte-order)
```
可以看到这里有很多 Berkeley DB 格式的数据库文件和几个 __db 数据文件。

### 重建数据库

如果 RPM 的数据库损坏，首先可以尝试重建它，如果无法重建，那么需要重新初始化数据库。
重建数据库
```bash
rpm --rebuilddb
```
这个命令会从已安装的软件包提取信息重建数据库，它从 /var/lib/rpm/Packages 这个文件中提取信息，其他所有的数据库文件都可以由这个文件重建。如果 RPM 的数据库是完好的，这个命令不会重建，而是对数据库中未使用的条目进行空间回收。
创建一个新的 RPM 数据
```bash
rpm --initdb
```
如果已经没有其他别的办法了，`--initdb` 会创建一个新的空的 RPM 数据库。由于新建的数据库是空的，不要万不得已不要使用这个命令。

## 参数说明
http://www.runoob.com/linux/linux-comm-rpm.html

# yum
> 参考资料
>
> [linux yum 命令|菜鸟教程](http://www.runoob.com/linux/linux-yum.html)
>
> http://man.linuxde.net/yum
> https://blog.csdn.net/wenwenxiong/article/details/51785221

yum（ Yellow dog Updater, Modified）是一个在Fedora和RedHat以及SUSE中的Shell前端软件包管理器。

基於RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软体包，无须繁琐地一次次下载、安装。

yum提供了查找、安装、删除某一个、一组甚至全部软件包的命令。

## 帮助

1. 查看 yum 工具的所有参数和子命令

```shell
yum help
yum -h
```

2. 查看子命令的帮助

```shell
yum help [子命令]
# eg：
yum help info
# 输出
Loaded plugins: fastestmirror
info [PACKAGE|all|available|installed|updates|distro-extras|extras|obsoletes|recent]

Display details about a package or group of packages
```

## 安装

```bash
yum install              #全部安装
yum install package1     #安装指定的安装包package1，支持通配符
yum groupinsall group1   #安装程序组group1
```

安装完成后使用 `rpm -q` 查找安装位置

``` shell
# 第一步，查找安装的软件包，PACKAGE_NAME支持通配符查询
rpm -qa PACKAGE_NAME
# 第二步，根据上面查到的软件包全称查找具体的安装位置，这里必须是全名不支持通配符
rpm -ql PACKAGE_NAME
```

## 更新和升级

```bash
yum update               #全部更新
yum update package1      #更新指定程序包package1
yum check-update         #检查可更新的程序
yum upgrade package1     #升级指定程序包package1
yum groupupdate group1   #升级程序组group1
```

## 查找和显示

```bash
yum info              #列出所有软件包的信息，包括installed和available
yum info installed    #列出所有已安装的软件包信息
yum info updates      #列出所有可更新的软件包信息
yum info extras       #列出所有已安装但不在 Yum Repository 内的软件包信息
yum info package1     #显示指定安装包信息package1，package1可以使用通配符
yum list              #显示所有程序包，包括installed和available
yum list installed    #列出所有已安装的软件包
yum list updates      #列出所有可更新的软件包
yum list extras       #列出所有已安装但不在 Yum Repository 内的软件包
yum list package1     #显示指定程序包安装情况package1，package1可以使用通配符
yum groupinfo group1  #显示程序组group1信息yum search string 根据关键字string查找安装包
yum search <keyword>  #查找软件包，使用keyword在名称和摘要中模糊搜索，但是不会显示安装状态
```

## 删除程序

```bash
yum remove &#124; erase package1   #删除程序包package1
yum groupremove group1             #删除程序组group1
yum deplist package1               #查看程序package1依赖情况
```

## 生成缓存

```bash
yum makecache
```

## 清除缓存

``` bash
yum clean packages       #清除缓存目录下的软件包
yum clean headers        #清除缓存目录下的 headers
yum clean oldheaders     #清除缓存目录下旧的 headers
yum clean, yum clean all (= yum clean packages; yum clean oldheaders) #清除缓存目录下的软件包及旧的headers
```
## 其他子命令

| 子明令 | 说明 |
|---|---|
| shell | 进入yum的shell提示符 |
| resolvedep | 显示rpm软件包的依赖关系 |
| localinstall | 安装本地的rpm软件包 |
| localupdate | 显示本地rpm软件包进行更新 |
| deplist | 显示rpm软件包的所有依赖关系 |

# dnf
DNF新一代的RPM软件包管理器。他首先出现在 Fedora 18 这个发行版中。而最近，他取代了YUM，正式成为 Fedora 22 的包管理器（它没有预装在 CentOS 和 RHEL 7 中）。

查看帮助
```bash
dnf -h
```

添加repo
```bash
sudo dnf config-manager --add-repo=http://repo.fdzh.org/FZUG/FZUG.repo
```
repo 的信息保存在 `/etc/yum.repos.d/` 目录下，文件后缀是 `.repo`，repo文件中 `$releasever` **表示当前系统的发行版本**， `$basearch` **系统硬件架构(CPU指令集)**,就是我们常说的i386、x86_64...

删除repo

进入`/etc/yum.repo.d/`删除相应的文件
